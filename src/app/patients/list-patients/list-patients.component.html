<div>
  <div class="flex justify-end min-w-max m-2">
    <a class="rounded-md bg-blue-600 text-white px-4 py-2 text-sm hover:shadow-inner" routerLink="/patients/create">Add
      Patient</a>
  </div>
  <table
    class="min-w-full divide-y-2 divide-gray-200 bg-white text-sm dark:divide-gray-700 dark:bg-gray-900 rounded-lg"
  >

    <tr class="select-none">
      <th (click)="sort('firstName')"
          class="text-left cursor-pointer whitespace-nowrap px-4 py-2 font-medium text-gray-900 dark:text-white"
      >
        <svg *ngIf="sortBy==='firstName'&&asc" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline"
             fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
        </svg>
        <svg *ngIf="sortBy==='firstName'&&!asc" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
             class="h-5 w-5 inline" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
        </svg>
        Name
      </th>
      <th (click)="sort('birthDate')"
          class="text-left cursor-pointer whitespace-nowrap px-4 py-2 font-medium text-gray-900 dark:text-white"
      >
        <svg *ngIf="sortBy==='birthDate'&&asc" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline"
             fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
        </svg>
        <svg *ngIf="sortBy==='birthDate'&&!asc" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
             class="h-5 w-5 inline" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
        </svg>
        Birth Date
      </th>
      <th (click)="sort('gender')"
          class="text-left cursor-pointer whitespace-nowrap px-4 py-2 font-medium text-gray-900 dark:text-white"
      >
        <svg *ngIf="sortBy==='gender'&&asc" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline"
             fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
        </svg>
        <svg *ngIf="sortBy==='gender'&&!asc" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
             class="h-5 w-5 inline" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
        </svg>
        Sex
      </th>
      <th (click)="sort('referable')"
          class="text-left	cursor-pointer whitespace-nowrap px-4 py-2 font-medium text-gray-900 dark:text-white"
      >
        <svg *ngIf="sortBy==='referable'&&asc" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline"
             fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"/>
        </svg>
        <svg *ngIf="sortBy==='referable'&&!asc" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
             class="h-5 w-5 inline" viewBox="0 0 16 16">
          <path fill-rule="evenodd"
                d="M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"/>
          <path
            d="M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"/>
        </svg>
        Referable
      </th>
      <th class="px-4 py-2"></th>
    </tr>

    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
    <tr *ngFor="let patient of page.content">
      <td
        class="whitespace-nowrap px-4 py-2 font-medium text-gray-900 dark:text-white"
      >
        {{patient.firstName}} {{patient.lastName}}
      </td>
      <td
        class="whitespace-nowrap px-4 py-2 text-gray-700 dark:text-gray-200"
      >
        {{patient.birthDate}}
      </td>
      <td
        class="whitespace-nowrap px-4 py-2 text-gray-700 dark:text-gray-200"
      >
        {{patient.gender}}
      </td>
      <td
        class="whitespace-nowrap px-4 py-2 text-gray-700 dark:text-gray-200"
      >
        {{patient.referable}}
      </td>
      <td class="whitespace-nowrap px-4 py-2">
        <a
          routerLink="/patients/{{patient.id}}"
          class="inline-block rounded border-blue-600 bg-blue-600 px-4 py-2 text-xs font-medium text-white hover:bg-blue-700"
        >
          View
        </a>
      </td>
    </tr>
    </tbody>
  </table>

  <ol *ngIf="page.totalPages!==1" class="flex justify-center gap-1 text-xs font-medium mt-8">
    <li>
      <a *ngIf="page.number!==0"
         (click)="updatePage(page.number-1)"
         class="select-none cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded text-gray-900 hover:bg-gray-200 active:shadow-inner dark:text-gray-100 dark:hover:bg-gray-700"
      >
        <span class="sr-only">Prev Page</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-3 w-3"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
            clip-rule="evenodd"
          />
        </svg>
      </a>
    </li>

    <li *ngFor="let i of range(Math.max(page.number-5,0),Math.min(page.number+6,page.totalPages))">

      <a *ngIf="page.number===i"
         class="select-none cursor-pointer block h-8 w-8 rounded bg-gray-300  text-center leading-8 dark:bg-gray-800 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700 active:shadow-inner">
        {{i}}
      </a>

      <a *ngIf="page.number!==i" (click)="updatePage(i)"
         class="select-none cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded text-gray-900 hover:bg-gray-200 dark:text-gray-100 dark:hover:bg-gray-700 active:shadow-inner">
        {{i}}
      </a>
    </li>

    <li>
      <a *ngIf="page.number!==page.totalPages-1"
         (click)="updatePage(page.number+1)"
         class="select-none cursor-pointer inline-flex h-8 w-8 items-center justify-center rounded text-gray-900 hover:bg-gray-200 active:shadow-inner dark:text-gray-100 dark:hover:bg-gray-700"
      >
        <span class="sr-only">Next Page</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-3 w-3"
          viewBox="0 0 20 20"
          fill="currentColor"
        >
          <path
            fill-rule="evenodd"
            d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
            clip-rule="evenodd"
          />
        </svg>
      </a>
    </li>
  </ol>
</div>
